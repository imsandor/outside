mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
ipv6: true
unified-delay: false
tcp-concurrent: true
global-ua: clash-verge/v2.0.0
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 5228, 8443]
  force-domain:
    - +.v2ex.com
    - +.netflix.com
    - +.nflxvideo.net
    - "alt1-mtalk.google.com"
    - "alt2-mtalk.google.com"
    - "alt3-mtalk.google.com"
    - "alt4-mtalk.google.com"
    - "alt5-mtalk.google.com"
    - "alt6-mtalk.google.com"
    - "alt7-mtalk.google.com"
    - "alt8-mtalk.google.com"
    - "mtalk.google.com"
    - "dl.google.com"
    - "dl.l.google.com"
  skip-domain:
    - +.bing.com
    - +.copilot.microsoft.com
    - +.apple.com
    - +.cdn-telegram.org
    - +.telegram.org
    - +.telegram-cdn.org
    - +.t.me

geodata-mode: false
geo-auto-update: true
geo-update-interval: 240
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/DustinWin/geoip/blob/clash/geoip.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/blob/release/geosite.dat"
  mmdb: "https://mirror.ghproxy.com/https://github.com/DustinWin/geoip/blob/clash/Country-lite.mmdb"
  asn: "https://mirror.ghproxy.com/https://github.com/P3TERX/GeoLite.mmdb/blob/download/GeoLite2-ASN.mmdb"

hosts:
  #'cdn.jsdelivr.us': [104.17.54.11, 104.17.17.17]
  #'mirror.ghproxy.com': [146.235.233.241, 129.151.136.35]
  '+.mcdn.bilivideo.com': 0.0.0.0
  '+.mcdn.bilivideo.cn': 0.0.0.0
  '+.avlyun.com': 0.0.0.0

dns:
  enable: true
  cache-algorithm: arc
  ipv6: true
  ipv6-timeout: 300
  use-hosts: true
  respect-rules: true
  listen: :1053
  default-nameserver:
    - 180.184.1.1
    - https://119.29.29.29/dns-query
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter: # fakeip è¿‡æ»¤ï¼Œé…ç½®ä¸ä½¿ç”¨fake-ipçš„åŸŸå
    - rule-set:fakeip
    # FCM
    - "alt1-mtalk.google.com"
    - "alt2-mtalk.google.com"
    - "alt3-mtalk.google.com"
    - "alt4-mtalk.google.com"
    - "alt5-mtalk.google.com"
    - "alt6-mtalk.google.com"
    - "alt7-mtalk.google.com"
    - "alt8-mtalk.google.com"
    - "mtalk.google.com"
    - "dl.google.com"
    - "dl.l.google.com"
  nameserver:
    - https://120.53.53.53/dns-query
    - https://223.5.5.5/dns-query
    - quic://pure.666.66a.net:853
  proxy-server-nameserver:
    - https://120.53.53.53/dns-query
    - https://223.5.5.5/dns-query
    - quic://pure.666.66a.net:853
  nameserver-policy:
    "+.lan": 10.0.0.1

#========= å»ºç«‹é”šç‚¹ =========#

# ç­–ç•¥ç»„å¼•ç”¨
p:    &a1 {type: http,     exclude-filter: '^(?=.*(.))(.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$', interval: 86400, health-check: {enable: true, url: 'https://cp.cloudflare.com', interval: 1800, timeout: 2000, lazy: true}}
use:  &a2 {type: select,   lazy: true,  url: 'https://cp.cloudflare.com', interval: 600, timeout: 2000, max-failed-times: 2, include-all: true}
auto: &a3 {type: url-test, lazy: true,  url: 'https://cp.cloudflare.com', interval: 600, tolerance: 200, timeout: 2000, max-failed-times: 2, include-all: true}

c:    &a4 {type: http,     behavior: classical, interval: 864000}
d:    &a5 {type: http,     behavior: domain,    interval: 864000}
i:    &a6 {type: http,     behavior: ipcidr,    interval: 864000}

ctxt: &t1 {type: http,     behavior: classical, format: text, interval: 864000}
dtxt: &t2 {type: http,     behavior: domain,    format: text, interval: 864000}
itxt: &t3 {type: http,     behavior: ipcidr,    format: text, interval: 864000}

dmrs: &m1 {type: http,     behavior: domain,    format: mrs, interval: 864000}
imrs: &m2 {type: http,     behavior: ipcidr,    format: mrs, interval: 864000}

sl:   &l1 {type: load-balance, url: 'https://cp.cloudflare.com', interval: 600, strategy: consistent-hashing, include-all: true}
lx:   &l2 {type: load-balance, url: 'https://cp.cloudflare.com', interval: 600, strategy: round-robin, include-all: true}
bc:   &l3 {type: load-balance, url: 'https://cp.cloudflare.com', interval: 600, strategy: sticky-sessions, include-all: true}
#

proxy-providers:
  ACA:
    <<: *a1
    url: https://dadada.acaisbest.com/api/v1/client/subscribe?token=2f910d01bef26aafa941e8565a541218&flag=meta&types=all
    # override:
      # additional-prefix: "ACA|"
  Alading:
    <<: *a1
    url: https://music.easygourl.xyz/link/PQ58fVVBsaHYE6TEf2bqRqzMyduXVgDP?config=all
    # override:
      # additional-prefix: "Alading|"
  jaycloud:
    <<: *a1
    url: https://study.jaycloud11111.top/study?token=6b66c9d39366e4407181b8129dbb7c09
    # override:
      # additional-prefix: "jaycloud|"        


proxies:
  - name: "âš¡ ç›´è¿"
    type: direct
    udp: true
  
proxy-groups:
  - {name: ğŸŒ å…¨çƒåŠ é€Ÿ, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹,âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png}
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, <<: *a2, icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png}
  - {name: ğŸ“º å“”å“©å“”å“©, type: select, proxies: [âš¡ ç›´è¿, ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *a3, filter: "æ¸¯|HK|(?i)Hong", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<:  *a3, filter: "æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åŸ¼ç‰|JP|(?i)Japan", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *a3, filter: "æ–°åŠ å¡|å¡|ç‹®åŸ|SG|(?i)Singapore", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *a3, filter: "ç¾|å‡¤å‡°åŸ|é˜¿ä»€æœ¬|è´¹åˆ©è’™|åŠ å·|çº½çº¦|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|è¥¿é›…å›¾|èŠåŠ å“¥|US|(?i)States|American", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png} 
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, <<: *a3, filter: "å°|æ¹¾|æ–°åŒ—|TW|(?i)Taiwan|(?i)Tai wan", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png}
  - {name: ğŸ“¥ å¾®è½¯äº‘ç›˜, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/OneDrive.png}
  - {name: ğŸ è‹¹æœæœåŠ¡, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Apple.png}
  - {name: ğŸª å¾®è½¯æœåŠ¡, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Copilot.png}
  - {name: ğŸ•¹ï¸ æ¸¸æˆå¹³å°, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Steam.png}
  - {name: ğŸ¬ å›½é™…åª’ä½“, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Disney+_1.png}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, <<: *a3, filter: "æ¸¯|HK|(?i)Hong|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åŸ¼ç‰|JP|(?i)Japan|æ–°åŠ å¡|å¡|ç‹®åŸ|SG|(?i)Singapore", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Speedtest.png}
  - {name: â›” å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT-DROP, ğŸŒ å…¨çƒåŠ é€Ÿ, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Reject.png}
  - {name: ğŸŸ å…œåº•åˆ†æµ, type: select, proxies: [ğŸŒ å…¨çƒåŠ é€Ÿ, âš¡ ç›´è¿], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png}

rule-providers:
  fakeip:    {<<: *m1, url: https://mirror.ghproxy.com/https://github.com/DustinWin/ruleset_geodata/releases/download/clash-ruleset/fakeip-filter.mrs,   path: ./ruleset/fakeip-filter.mrs}
  Stream:    {<<: *a4, url: https://mirror.ghproxy.com/https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Clash/GlobalMedia/GlobalMedia_Classical_No_Resolve.yaml,  path: ./ruleset/Stream.yaml}
  AD:        {<<: *a5, url: https://mirror.ghproxy.com/https://github.com/TG-Twilight/AWAvenue-Ads-Rule/blob/main/Filters/AWAvenue-Ads-Rule-Clash.yaml,   path: ./ruleset/AD.yaml}
  BanSogou:  {<<: *t1, url: https://ruleset.skk.moe/Clash/non_ip/sogouinput.txt,   path: ./ruleset/BanSogou.txt}
  Private:   {<<: *m2, url: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/private.mrs,   path: ./ruleset/Private.mrs}
  CN_ip:     {<<: *m2, url: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/cn.mrs,   path: ./ruleset/CN_ip.mrs}
  CN_domain: {<<: *m1, url: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/cn.mrs,   path: ./ruleset/CN_domain.mrs}

rules:
  - DOMAIN-SUFFIX,pub1cf.emby.wtf,âš¡ ç›´è¿
  - DOMAIN-SUFFIX,pub2cf.emby.wtf,âš¡ ç›´è¿
  - DOMAIN-SUFFIX,pub3cf.emby.wtf,âš¡ ç›´è¿
  #ç»ˆç‚¹ç«™ç›´è¿è·¯çº¿
  - DOMAIN-SUFFIX,vip2.jellyfin.asia,âš¡ ç›´è¿
  #æ°´æ¯ç›´è¿è·¯çº¿
  - DOMAIN-SUFFIX,pilifun.top,âš¡ ç›´è¿
  - DOMAIN-SUFFIX,emby-kyoma.pilipiliultra.com,âš¡ ç›´è¿
  - DOMAIN-SUFFIX,css.pilipili.club,âš¡ ç›´è¿
  #pilipiliç›´è¿è·¯çº¿
  - DOMAIN-SUFFIX,viclub.top,âš¡ ç›´è¿
  #å¤§Vç›´è¿è·¯çº¿
  - DOMAIN-SUFFIX,lyrebirdemby.com,âš¡ ç›´è¿
  #ç´é¸Ÿç›´è¿
  - DOMAIN-SUFFIX,811861.xyz,âš¡ ç›´è¿
  #AWAç›´è¿
  - DOMAIN-SUFFIX,sfcj.org,âš¡ ç›´è¿
   #éè¶Šç›´è¿
  - DOMAIN-SUFFIX,7777777.buzz,âš¡ ç›´è¿
  - DOMAIN-SUFFIX,581658.best,âš¡ ç›´è¿
  #å½©è™¹ç›´è¿
  - DOMAIN-SUFFIX,20120714.xyz,âš¡ ç›´è¿
  #åœŸæ‹¨é¼ ç›´è¿
  - DOMAIN-SUFFIX,1024.name,âš¡ ç›´è¿
  #è¥¿ç“œç›´è¿
  - DOMAIN-SUFFIX,9191001.xyz,âš¡ ç›´è¿
  #æ”¾æ˜ å…ç›´è¿
  

  
  - DOMAIN-SUFFIX,play.charontv.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  #å¡æˆ
  - DOMAIN-SUFFIX,film.hovervan.org,ğŸŒ å…¨çƒåŠ é€Ÿ
  #NMemby
  - DOMAIN-SUFFIX,misty.cx,ğŸŒ å…¨çƒåŠ é€Ÿ
  #Misty
  - DOMAIN-SUFFIX,media.nijigem.by,ğŸŒ å…¨çƒåŠ é€Ÿ
  #äºŒæ¬¡å…ƒemby 
  - DOMAIN-SUFFIX,stream_pilipili.misakaf.org,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,pilipili.club,ğŸŒ å…¨çƒåŠ é€Ÿ
  #pilipili 
  - DOMAIN-SUFFIX,gd.9521732.xyz,ğŸŒ å…¨çƒåŠ é€Ÿ
  #çº¸ç‰‡äºº
  - DOMAIN-SUFFIX,v.20120714.xyz,ğŸŒ å…¨çƒåŠ é€Ÿ
  #Marmot_emby
  - DOMAIN-SUFFIX,132.226.229.139,ğŸŒ å…¨çƒåŠ é€Ÿ
  #å¼€å¿ƒæœ
  - DOMAIN-SUFFIX,random.ouonet.org,ğŸŒ å…¨çƒåŠ é€Ÿ
  #OuO&JMS
  - DOMAIN-SUFFIX,cf.jmsooo.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  #JMS 
  - DOMAIN-SUFFIX,pub1.term.wtf,ğŸŒ å…¨çƒåŠ é€Ÿ 
  #ç»ˆç‚¹ç«™å¤‡ç”¨è·¯çº¿
  - DOMAIN-SUFFIX,coemn.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  #cc 
  - RULE-SET,Private,âš¡ ç›´è¿,no-resolve
  - AND,((DOMAIN-SUFFIX,googlevideo.com), (NETWORK,UDP)),REJECT-DROP
  - AND,((DOMAIN,youtubei.googleapis.com), (NETWORK,UDP)),REJECT-DROP
  #- AND,((PROCESS-NAME,com.tencent.mm),(NETWORK,UDP)),REJECT-DROP
  #- AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(GEOSITE,geolocation-!cn),REJECT
  - DOMAIN-SUFFIX,sentry.io,REJECT-DROP
  - GEOSITE,bahamut,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  - GEOSITE,hamivideo,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  - GEOSITE,category-games@cn,âš¡ ç›´è¿
  - RULE-SET,AD,â›” å¹¿å‘Šæ‹¦æˆª
  #- RULE-SET,BanSogou,â›” å¹¿å‘Šæ‹¦æˆª # æœç‹—è¾“å…¥æ³•ä¸Šä¼ ä¿¡æ¯
  - RULE-SET,Stream,ğŸ¬ å›½é™…åª’ä½“
  - GEOSITE,BiliBili,ğŸ“º å“”å“©å“”å“©
  - GEOSITE,Telegram,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOSITE,Twitter,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOSITE,OneDrive,ğŸ“¥ å¾®è½¯äº‘ç›˜
  - GEOSITE,github,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOSITE,Microsoft,ğŸª å¾®è½¯æœåŠ¡
  - GEOSITE,Apple,ğŸ è‹¹æœæœåŠ¡
  - GEOSITE,category-games,ğŸ•¹ï¸ æ¸¸æˆå¹³å°
  - GEOSITE,Google,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOSITE,geolocation-!cn,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,CN_domain,âš¡ ç›´è¿
  - GEOIP,apple,ğŸ è‹¹æœæœåŠ¡
  - GEOIP,google,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOIP,telegram,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOIP,twitter,ğŸŒ å…¨çƒåŠ é€Ÿ
  - GEOIP,bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,CN_ip,âš¡ ç›´è¿
  - MATCH,ğŸŸ å…œåº•åˆ†æµ
